<h1 id="infrastructure-workflows">Infrastructure workflows</h1>

<p>File formats</p>
<ul>
  <li>DiscoveredProject: output from <code class="language-plaintext highlighter-rouge">matlas discover</code></li>
  <li>ApplyDocument / ApplyConfig: inputs for <code class="language-plaintext highlighter-rouge">matlas infra</code></li>
</ul>

<p>Discover</p>
<ul>
  <li>Enumerate Atlas resources for a project</li>
  <li>Flags: <code class="language-plaintext highlighter-rouge">--project-id</code>, <code class="language-plaintext highlighter-rouge">--include [project,clusters,users,network,databases]</code>, <code class="language-plaintext highlighter-rouge">--exclude</code>, <code class="language-plaintext highlighter-rouge">--mask-secrets</code>, <code class="language-plaintext highlighter-rouge">--include-databases</code>, <code class="language-plaintext highlighter-rouge">--use-temp-user</code>, <code class="language-plaintext highlighter-rouge">--resource-type</code>, <code class="language-plaintext highlighter-rouge">--resource-name</code>, <code class="language-plaintext highlighter-rouge">--convert-to-apply</code>, <code class="language-plaintext highlighter-rouge">--output [yaml|json]</code>, <code class="language-plaintext highlighter-rouge">-o file</code></li>
  <li>Example: <code class="language-plaintext highlighter-rouge">matlas discover --project-id &lt;id&gt; --include-databases --use-temp-user --output yaml -o project.yaml</code></li>
</ul>

<p>Plan</p>
<ul>
  <li>Generate an execution plan without applying</li>
  <li>Example: <code class="language-plaintext highlighter-rouge">matlas infra plan -f config.yaml --output table</code></li>
</ul>

<p>Diff</p>
<ul>
  <li>Show differences between desired config and current Atlas state</li>
  <li>Example: <code class="language-plaintext highlighter-rouge">matlas infra diff -f config.yaml --detailed --show-context 3</code></li>
</ul>

<p>Apply</p>
<ul>
  <li>Reconcile desired state</li>
  <li>Key flags: <code class="language-plaintext highlighter-rouge">--dry-run</code>, <code class="language-plaintext highlighter-rouge">--dry-run-mode [quick|thorough|detailed]</code>, <code class="language-plaintext highlighter-rouge">--auto-approve</code>, <code class="language-plaintext highlighter-rouge">--preserve-existing</code>, <code class="language-plaintext highlighter-rouge">--watch</code></li>
  <li>Example: <code class="language-plaintext highlighter-rouge">matlas infra -f config.yaml --dry-run --output summary</code></li>
</ul>

<p>Show</p>
<ul>
  <li>Display current Atlas project state</li>
  <li>Example: <code class="language-plaintext highlighter-rouge">matlas infra show --project-id &lt;id&gt; --output table</code></li>
</ul>

<p>Destroy</p>
<ul>
  <li>Delete resources defined in config or everything discovered (<code class="language-plaintext highlighter-rouge">--discovery-only</code>)</li>
  <li>Confirmation required unless <code class="language-plaintext highlighter-rouge">--auto-approve</code>/<code class="language-plaintext highlighter-rouge">--force</code></li>
  <li>Example: <code class="language-plaintext highlighter-rouge">matlas infra destroy -f config.yaml</code> or <code class="language-plaintext highlighter-rouge">matlas infra destroy --discovery-only --project-id &lt;id&gt;</code></li>
</ul>




